import{bf as u,a as B,r as g,O as F,o as O,f as T,s as U,y as e,w as a,W as r,t as j,k as i,j as w,bd as y,F as z,bg as V,a0 as A,Y as D,Z as N,$ as I}from"./index-DPtc5B1r.js";import{E as R}from"./el-dialog-hwff-1qh.js";import"./el-overlay-kGByQ4b-.js";import{E as h,a as H,b as S}from"./el-table-column-B9J-04Mz.js";/* empty css                   */import"./refs-w-dndnrR.js";import"./vnode-DNOolhDg.js";const W=()=>u.get("/admin/acl/permission"),Y=d=>d.id?u.put("/admin/acl/permission/update",d):u.post("/admin/acl/permission/save",d),Z=d=>u.delete("/admin/acl/permission/remove/"+d),G={class:"dialog-footer"},ae=B({__name:"index",setup(d){let c=g([]),t=g(!1),o=F({code:"",level:0,name:"",pid:0});O(()=>{f()});const f=async()=>{let s=await W();s.code===200&&(c.value=s.data)},E=s=>{Object.assign(o,{id:0,code:"",level:0,name:"",pid:0}),t.value=!0,o.level=s.level+1,o.pid=s.id},C=s=>{t.value=!0,Object.assign(o,s)},k=async()=>{t.value=!1,(await Y(o)).code===200&&(t.value=!1,V({type:"success",message:o.id?"更新成功":"添加成功"}),f())},x=async s=>{(await Z(s)).code===200&&V({type:"success",message:"删除成功"})};return(s,n)=>{const p=h,m=A,P=H,M=S,_=D,b=N,$=I,q=R;return T(),U(z,null,[e(M,{style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"",data:i(c)},{default:a(()=>[e(p,{prop:"name",label:"名称"}),e(p,{prop:"code",label:"权限值"}),e(p,{prop:"updateTime",label:"修改时间","show-overflow-tooltip":""}),e(p,{label:"操作",width:"260px"},{default:a(({row:l})=>[e(m,{size:"small",disabled:l.level===4,onClick:v=>E(l)},{default:a(()=>[r(j(l.level===3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"]),e(m,{type:"primary",size:"small",disabled:l.level===1,onClick:v=>C(l)},{default:a(()=>[r(" 编辑 ")]),_:2},1032,["disabled","onClick"]),e(P,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:v=>x(l.id)},{reference:a(()=>[e(m,{type:"danger",size:"small",disabled:l.level===1},{default:a(()=>[r(" 删除 ")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(q,{modelValue:i(t),"onUpdate:modelValue":n[3]||(n[3]=l=>y(t)?t.value=l:t=l),title:i(o).id?"更新菜单":"添加菜单"},{footer:a(()=>[w("span",G,[e(m,{onClick:n[2]||(n[2]=l=>y(t)?t.value=!1:t=!1)},{default:a(()=>[r("取消")]),_:1}),e(m,{type:"primary",onClick:k},{default:a(()=>[r("确定")]),_:1})])]),default:a(()=>[e($,null,{default:a(()=>[e(b,{label:"名称"},{default:a(()=>[e(_,{placeholder:"请你输入菜单的名称",modelValue:i(o).name,"onUpdate:modelValue":n[0]||(n[0]=l=>i(o).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"权限"},{default:a(()=>[e(_,{placeholder:"请你输入权限数值",modelValue:i(o).code,"onUpdate:modelValue":n[1]||(n[1]=l=>i(o).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{ae as default};
