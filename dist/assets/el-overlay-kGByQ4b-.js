import{bd as j,aW as G,a6 as A,bO as J,D as F,aU as E,L as B,bP as K,bQ as Q,aS as R,bR as X,aT as ee,bw as w,b as k,d as p,a as oe,y as te,q as M,aY as ne,i as le,ah as L,b1 as ae,bS as se,aJ as P,r as b,bT as ue,bU as ce,c as I,ad as ie,bV as de,au as re,o as fe,a9 as ye,A as D}from"./index-DPtc5B1r.js";import{P as x}from"./vnode-DNOolhDg.js";const ve=(e,o={})=>{j(e)||G("[useLockscreen]","You need to pass a ref param to this function");const a=o.ns||A("popup"),c=J(()=>a.bm("parent","hidden"));if(!F||E(document.body,c.value))return;let n=0,s=!1,t="0";const d=()=>{setTimeout(()=>{ee(document==null?void 0:document.body,c.value),s&&document&&(document.body.style.width=t)},200)};B(e,r=>{if(!r){d();return}s=!E(document.body,c.value),s&&(t=document.body.style.width),n=K(a.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,f=Q(document.body,"overflowY");n>0&&(u||f==="scroll")&&s&&(document.body.style.width=`calc(100% - ${n}px)`),R(document.body,c.value)}),X(()=>d())},me=e=>{if(!e)return{onClick:w,onMousedown:w,onMouseup:w};let o=!1,a=!1;return{onClick:t=>{o&&a&&e(t),o=a=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{a=t.target===t.currentTarget}}},be=k({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:p([String,Array,Object])},zIndex:{type:p([String,Number])}}),pe={click:e=>e instanceof MouseEvent},Ce="overlay";var ge=oe({name:"ElOverlay",props:be,emits:pe,setup(e,{slots:o,emit:a}){const c=A(Ce),n=r=>{a("click",r)},{onClick:s,onMousedown:t,onMouseup:d}=me(e.customMaskEvent?void 0:n);return()=>e.mask?te("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:t,onMouseup:d},[M(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):ne("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const xe=ge,he=k({center:Boolean,alignCenter:Boolean,closeIcon:{type:le},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Be={close:()=>!0},ke=k({...he,appendToBody:Boolean,appendTo:{type:p(String),default:"body"},beforeClose:{type:p(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Oe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[L]:e=>ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Te=(e,o)=>{var a;const n=ye().emit,{nextZIndex:s}=se();let t="";const d=P(),r=P(),u=b(!1),f=b(!1),m=b(!1),C=b((a=e.zIndex)!=null?a:s());let y,v;const N=ue("namespace",ce),z=I(()=>{const l={},i=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=ie(e.width))),l}),V=I(()=>e.alignCenter?{display:"flex"}:{});function U(){n("opened")}function Y(){n("closed"),n(L,!1),e.destroyOnClose&&(m.value=!1)}function $(){n("close")}function O(){v==null||v(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=D(()=>T(),e.openDelay):T()}function g(){y==null||y(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=D(()=>S(),e.closeDelay):S()}function h(){function l(i){i||(f.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(l):g()}function H(){e.closeOnClickModal&&h()}function T(){F&&(u.value=!0)}function S(){u.value=!1}function W(){n("openAutoFocus")}function _(){n("closeAutoFocus")}function q(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&ve(u);function Z(){e.closeOnPressEscape&&h()}return B(()=>e.modelValue,l=>{l?(f.value=!1,O(),m.value=!0,C.value=de(e.zIndex)?s():C.value++,re(()=>{n("open"),o.value&&(o.value.scrollTop=0)})):u.value&&g()}),B(()=>e.fullscreen,l=>{o.value&&(l?(t=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=t)}),fe(()=>{e.modelValue&&(u.value=!0,m.value=!0,O())}),{afterEnter:U,afterLeave:Y,beforeLeave:$,handleClose:h,onModalClick:H,close:g,doClose:S,onOpenAutoFocus:W,onCloseAutoFocus:_,onCloseRequested:Z,onFocusoutPrevented:q,titleId:d,bodyId:r,closed:f,style:z,overlayDialogStyle:V,rendered:m,visible:u,zIndex:C}};export{xe as E,Oe as a,he as b,Be as c,ke as d,me as e,Te as u};
