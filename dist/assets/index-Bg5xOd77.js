import{bq as Be,b as W,d as _,a as A,a6 as G,c as P,br as je,bs as $e,bt as qe,bu as we,ay as Ce,bj as Ee,I as ue,f as g,s as T,n as h,k as e,j as z,l as V,q as N,t as Z,p as E,g as M,w as k,m as Ve,E as j,_ as Y,aa as Te,aW as ie,bv as Ue,ai as Se,aZ as re,bw as L,a5 as Ie,ap as x,r as q,F as Pe,am as He,av as Le,x as K,y as b,bx as Ge,by as Ke,bz as Fe,bA as We,a8 as Xe,ac as le,bB as de,bC as Je,bD as Ye,bE as Ze,L as ce,aA as Qe,aC as xe,a7 as et,aE as tt,aO as pe,aP as fe,bf as Q,bg as H,O as at,au as me,o as st,bF as ot,h as rt,bG as ve,W as se,bH as lt,bd as oe,a0 as nt,a1 as it,Y as ut,Z as dt,$ as ct,M as pt}from"./index-Rm7tvSTH.js";import{E as ft}from"./el-dialog-Hq69o9V2.js";import"./el-overlay-CN1xueOC.js";import{E as mt}from"./el-pagination-BbcnGJqi.js";import{E as vt,a as gt,b as yt}from"./el-table-column-BpANfTtk.js";/* empty css                   */import"./refs-BzejS40Y.js";import"./vnode-BLdlz9xG.js";var bt=1,ht=4;function ge(t){return Be(t,bt|ht)}const kt=W({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:_(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:_([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:_(Function),default:t=>`${t}%`}}),_t=["aria-valuenow"],$t={viewBox:"0 0 100 100"},wt=["d","stroke","stroke-linecap","stroke-width"],Ct=["d","stroke","opacity","stroke-linecap","stroke-width"],Et={key:0},Tt=A({name:"ElProgress"}),Ut=A({...Tt,props:kt,setup(t){const a=t,s={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},l=G("progress"),i=P(()=>({width:`${a.percentage}%`,animationDuration:`${a.duration}s`,background:S(a.percentage)})),c=P(()=>(a.strokeWidth/a.width*100).toFixed(1)),v=P(()=>["circle","dashboard"].includes(a.type)?Number.parseInt(`${50-Number.parseFloat(c.value)/2}`,10):0),w=P(()=>{const o=v.value,C=a.type==="dashboard";return`
          M 50 50
          m 0 ${C?"":"-"}${o}
          a ${o} ${o} 0 1 1 0 ${C?"-":""}${o*2}
          a ${o} ${o} 0 1 1 0 ${C?"":"-"}${o*2}
          `}),m=P(()=>2*Math.PI*v.value),$=P(()=>a.type==="dashboard"?.75:1),U=P(()=>`${-1*m.value*(1-$.value)/2}px`),y=P(()=>({strokeDasharray:`${m.value*$.value}px, ${m.value}px`,strokeDashoffset:U.value})),u=P(()=>({strokeDasharray:`${m.value*$.value*(a.percentage/100)}px, ${m.value}px`,strokeDashoffset:U.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),n=P(()=>{let o;return a.color?o=S(a.percentage):o=s[a.status]||s.default,o}),d=P(()=>a.status==="warning"?je:a.type==="line"?a.status==="success"?$e:qe:a.status==="success"?we:Ce),r=P(()=>a.type==="line"?12+a.strokeWidth*.4:a.width*.111111+2),f=P(()=>a.format(a.percentage));function p(o){const C=100/o.length;return o.map((R,O)=>ue(R)?{color:R,percentage:(O+1)*C}:R).sort((R,O)=>R.percentage-O.percentage)}const S=o=>{var C;const{color:F}=a;if(Ee(F))return F(o);if(ue(F))return F;{const R=p(F);for(const O of R)if(O.percentage>o)return O.color;return(C=R[R.length-1])==null?void 0:C.color}};return(o,C)=>(g(),T("div",{class:h([e(l).b(),e(l).m(o.type),e(l).is(o.status),{[e(l).m("without-text")]:!o.showText,[e(l).m("text-inside")]:o.textInside}]),role:"progressbar","aria-valuenow":o.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[o.type==="line"?(g(),T("div",{key:0,class:h(e(l).b("bar"))},[z("div",{class:h(e(l).be("bar","outer")),style:V({height:`${o.strokeWidth}px`})},[z("div",{class:h([e(l).be("bar","inner"),{[e(l).bem("bar","inner","indeterminate")]:o.indeterminate},{[e(l).bem("bar","inner","striped")]:o.striped},{[e(l).bem("bar","inner","striped-flow")]:o.stripedFlow}]),style:V(e(i))},[(o.showText||o.$slots.default)&&o.textInside?(g(),T("div",{key:0,class:h(e(l).be("bar","innerText"))},[N(o.$slots,"default",{percentage:o.percentage},()=>[z("span",null,Z(e(f)),1)])],2)):E("v-if",!0)],6)],6)],2)):(g(),T("div",{key:1,class:h(e(l).b("circle")),style:V({height:`${o.width}px`,width:`${o.width}px`})},[(g(),T("svg",$t,[z("path",{class:h(e(l).be("circle","track")),d:e(w),stroke:`var(${e(l).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":o.strokeLinecap,"stroke-width":e(c),fill:"none",style:V(e(y))},null,14,wt),z("path",{class:h(e(l).be("circle","path")),d:e(w),stroke:e(n),fill:"none",opacity:o.percentage?1:0,"stroke-linecap":o.strokeLinecap,"stroke-width":e(c),style:V(e(u))},null,14,Ct)]))],6)),(o.showText||o.$slots.default)&&!o.textInside?(g(),T("div",{key:2,class:h(e(l).e("text")),style:V({fontSize:`${e(r)}px`})},[N(o.$slots,"default",{percentage:o.percentage},()=>[o.status?(g(),M(e(j),{key:1},{default:k(()=>[(g(),M(Ve(e(d))))]),_:1})):(g(),T("span",Et,Z(e(f)),1))])],6)):E("v-if",!0)],10,_t))}});var St=Y(Ut,[["__file","progress.vue"]]);const Pt=Te(St),Re=Symbol("uploadContextKey"),Lt="ElUpload";class Ft extends Error{constructor(a,s,l,i){super(a),this.name="UploadAjaxError",this.status=s,this.method=l,this.url=i}}function ye(t,a,s){let l;return s.response?l=`${s.response.error||s.response}`:s.responseText?l=`${s.responseText}`:l=`fail to ${a.method} ${t} ${s.status}`,new Ft(l,s.status,a.method,t)}function Rt(t){const a=t.responseText||t.response;if(!a)return a;try{return JSON.parse(a)}catch{return a}}const Nt=t=>{typeof XMLHttpRequest>"u"&&ie(Lt,"XMLHttpRequest is undefined");const a=new XMLHttpRequest,s=t.action;a.upload&&a.upload.addEventListener("progress",c=>{const v=c;v.percent=c.total>0?c.loaded/c.total*100:0,t.onProgress(v)});const l=new FormData;if(t.data)for(const[c,v]of Object.entries(t.data))Ue(v)&&v.length?l.append(c,...v):l.append(c,v);l.append(t.filename,t.file,t.file.name),a.addEventListener("error",()=>{t.onError(ye(s,t,a))}),a.addEventListener("load",()=>{if(a.status<200||a.status>=300)return t.onError(ye(s,t,a));t.onSuccess(Rt(a))}),a.open(t.method,s,!0),t.withCredentials&&"withCredentials"in a&&(a.withCredentials=!0);const i=t.headers||{};if(i instanceof Headers)i.forEach((c,v)=>a.setRequestHeader(v,c));else for(const[c,v]of Object.entries(i))Se(v)||a.setRequestHeader(c,String(v));return a.send(l),a},Ne=["text","picture","picture-card"];let Ot=1;const ne=()=>Date.now()+Ot++,Oe=W({action:{type:String,default:"#"},headers:{type:_(Object)},method:{type:String,default:"post"},data:{type:_([Object,Function,Promise]),default:()=>re({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:_(Array),default:()=>re([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ne,default:"text"},httpRequest:{type:_(Function),default:Nt},disabled:Boolean,limit:Number}),Dt=W({...Oe,beforeUpload:{type:_(Function),default:L},beforeRemove:{type:_(Function)},onRemove:{type:_(Function),default:L},onChange:{type:_(Function),default:L},onPreview:{type:_(Function),default:L},onSuccess:{type:_(Function),default:L},onProgress:{type:_(Function),default:L},onError:{type:_(Function),default:L},onExceed:{type:_(Function),default:L},crossorigin:{type:_(String)}}),Mt=W({files:{type:_(Array),default:()=>re([])},disabled:{type:Boolean,default:!1},handlePreview:{type:_(Function),default:L},listType:{type:String,values:Ne,default:"text"},crossorigin:{type:_(String)}}),zt={remove:t=>!!t},At=["onKeydown"],Bt=["src","crossorigin"],jt=["onClick"],qt=["title"],Vt=["onClick"],It=["onClick"],Ht=A({name:"ElUploadList"}),Gt=A({...Ht,props:Mt,emits:zt,setup(t,{emit:a}){const s=t,{t:l}=Ie(),i=G("upload"),c=G("icon"),v=G("list"),w=x(),m=q(!1),$=P(()=>[i.b("list"),i.bm("list",s.listType),i.is("disabled",s.disabled)]),U=y=>{a("remove",y)};return(y,u)=>(g(),M(We,{tag:"ul",class:h(e($)),name:e(v).b()},{default:k(()=>[(g(!0),T(Pe,null,He(y.files,n=>(g(),T("li",{key:n.uid||n.name,class:h([e(i).be("list","item"),e(i).is(n.status),{focusing:m.value}]),tabindex:"0",onKeydown:Le(d=>!e(w)&&U(n),["delete"]),onFocus:u[0]||(u[0]=d=>m.value=!0),onBlur:u[1]||(u[1]=d=>m.value=!1),onClick:u[2]||(u[2]=d=>m.value=!1)},[N(y.$slots,"default",{file:n},()=>[y.listType==="picture"||n.status!=="uploading"&&y.listType==="picture-card"?(g(),T("img",{key:0,class:h(e(i).be("list","item-thumbnail")),src:n.url,crossorigin:y.crossorigin,alt:""},null,10,Bt)):E("v-if",!0),n.status==="uploading"||y.listType!=="picture-card"?(g(),T("div",{key:1,class:h(e(i).be("list","item-info"))},[z("a",{class:h(e(i).be("list","item-name")),onClick:K(d=>y.handlePreview(n),["prevent"])},[b(e(j),{class:h(e(c).m("document"))},{default:k(()=>[b(e(Ge))]),_:1},8,["class"]),z("span",{class:h(e(i).be("list","item-file-name")),title:n.name},Z(n.name),11,qt)],10,jt),n.status==="uploading"?(g(),M(e(Pt),{key:0,type:y.listType==="picture-card"?"circle":"line","stroke-width":y.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:V(y.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):E("v-if",!0)],2)):E("v-if",!0),z("label",{class:h(e(i).be("list","item-status-label"))},[y.listType==="text"?(g(),M(e(j),{key:0,class:h([e(c).m("upload-success"),e(c).m("circle-check")])},{default:k(()=>[b(e($e))]),_:1},8,["class"])):["picture-card","picture"].includes(y.listType)?(g(),M(e(j),{key:1,class:h([e(c).m("upload-success"),e(c).m("check")])},{default:k(()=>[b(e(we))]),_:1},8,["class"])):E("v-if",!0)],2),e(w)?E("v-if",!0):(g(),M(e(j),{key:2,class:h(e(c).m("close")),onClick:d=>U(n)},{default:k(()=>[b(e(Ce))]),_:2},1032,["class","onClick"])),E(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),E(" This is a bug which needs to be fixed "),E(" TODO: Fix the incorrect navigation interaction "),e(w)?E("v-if",!0):(g(),T("i",{key:3,class:h(e(c).m("close-tip"))},Z(e(l)("el.upload.deleteTip")),3)),y.listType==="picture-card"?(g(),T("span",{key:4,class:h(e(i).be("list","item-actions"))},[z("span",{class:h(e(i).be("list","item-preview")),onClick:d=>y.handlePreview(n)},[b(e(j),{class:h(e(c).m("zoom-in"))},{default:k(()=>[b(e(Ke))]),_:1},8,["class"])],10,Vt),e(w)?E("v-if",!0):(g(),T("span",{key:0,class:h(e(i).be("list","item-delete")),onClick:d=>U(n)},[b(e(j),{class:h(e(c).m("delete"))},{default:k(()=>[b(e(Fe))]),_:1},8,["class"])],10,It))],2)):E("v-if",!0)])],42,At))),128)),N(y.$slots,"append")]),_:3},8,["class","name"]))}});var be=Y(Gt,[["__file","upload-list.vue"]]);const Kt=W({disabled:{type:Boolean,default:!1}}),Wt={file:t=>Ue(t)},Xt=["onDrop","onDragover"],De="ElUploadDrag",Jt=A({name:De}),Yt=A({...Jt,props:Kt,emits:Wt,setup(t,{emit:a}){Xe(Re)||ie(De,"usage: <el-upload><el-upload-dragger /></el-upload>");const l=G("upload"),i=q(!1),c=x(),v=m=>{if(c.value)return;i.value=!1,m.stopPropagation();const $=Array.from(m.dataTransfer.files);a("file",$)},w=()=>{c.value||(i.value=!0)};return(m,$)=>(g(),T("div",{class:h([e(l).b("dragger"),e(l).is("dragover",i.value)]),onDrop:K(v,["prevent"]),onDragover:K(w,["prevent"]),onDragleave:$[0]||($[0]=K(U=>i.value=!1,["prevent"]))},[N(m.$slots,"default")],42,Xt))}});var Zt=Y(Yt,[["__file","upload-dragger.vue"]]);const Qt=W({...Oe,beforeUpload:{type:_(Function),default:L},onRemove:{type:_(Function),default:L},onStart:{type:_(Function),default:L},onSuccess:{type:_(Function),default:L},onProgress:{type:_(Function),default:L},onError:{type:_(Function),default:L},onExceed:{type:_(Function),default:L}}),xt=["onKeydown"],ea=["name","multiple","accept"],ta=A({name:"ElUploadContent",inheritAttrs:!1}),aa=A({...ta,props:Qt,setup(t,{expose:a}){const s=t,l=G("upload"),i=x(),c=le({}),v=le(),w=r=>{if(r.length===0)return;const{autoUpload:f,limit:p,fileList:S,multiple:o,onStart:C,onExceed:F}=s;if(p&&S.length+r.length>p){F(r,S);return}o||(r=r.slice(0,1));for(const R of r){const O=R;O.uid=ne(),C(O),f&&m(O)}},m=async r=>{if(v.value.value="",!s.beforeUpload)return U(r);let f,p={};try{const o=s.data,C=s.beforeUpload(r);p=de(s.data)?ge(s.data):s.data,f=await C,de(s.data)&&Je(o,p)&&(p=ge(s.data))}catch{f=!1}if(f===!1){s.onRemove(r);return}let S=r;f instanceof Blob&&(f instanceof File?S=f:S=new File([f],r.name,{type:r.type})),U(Object.assign(S,{uid:r.uid}),p)},$=async(r,f)=>Ee(r)?r(f):r,U=async(r,f)=>{const{headers:p,data:S,method:o,withCredentials:C,name:F,action:R,onProgress:O,onSuccess:ee,onError:te,httpRequest:ae}=s;try{f=await $(f??S,r)}catch{s.onRemove(r);return}const{uid:I}=r,X={headers:p||{},withCredentials:C,file:r,data:f,method:o,filename:F,action:R,onProgress:B=>{O(B,r)},onSuccess:B=>{ee(B,r),delete c.value[I]},onError:B=>{te(B,r),delete c.value[I]}},J=ae(X);c.value[I]=J,J instanceof Promise&&J.then(X.onSuccess,X.onError)},y=r=>{const f=r.target.files;f&&w(Array.from(f))},u=()=>{i.value||(v.value.value="",v.value.click())},n=()=>{u()};return a({abort:r=>{Ye(c.value).filter(r?([p])=>String(r.uid)===p:()=>!0).forEach(([p,S])=>{S instanceof XMLHttpRequest&&S.abort(),delete c.value[p]})},upload:m}),(r,f)=>(g(),T("div",{class:h([e(l).b(),e(l).m(r.listType),e(l).is("drag",r.drag)]),tabindex:"0",onClick:u,onKeydown:Le(K(n,["self"]),["enter","space"])},[r.drag?(g(),M(Zt,{key:0,disabled:e(i),onFile:w},{default:k(()=>[N(r.$slots,"default")]),_:3},8,["disabled"])):N(r.$slots,"default",{key:1}),z("input",{ref_key:"inputRef",ref:v,class:h(e(l).e("input")),name:r.name,multiple:r.multiple,accept:r.accept,type:"file",onChange:y,onClick:f[0]||(f[0]=K(()=>{},["stop"]))},null,42,ea)],42,xt))}});var he=Y(aa,[["__file","upload-content.vue"]]);const ke="ElUpload",_e=t=>{var a;(a=t.url)!=null&&a.startsWith("blob:")&&URL.revokeObjectURL(t.url)},sa=(t,a)=>{const s=Ze(t,"fileList",void 0,{passive:!0}),l=u=>s.value.find(n=>n.uid===u.uid);function i(u){var n;(n=a.value)==null||n.abort(u)}function c(u=["ready","uploading","success","fail"]){s.value=s.value.filter(n=>!u.includes(n.status))}const v=(u,n)=>{const d=l(n);d&&(console.error(u),d.status="fail",s.value.splice(s.value.indexOf(d),1),t.onError(u,d,s.value),t.onChange(d,s.value))},w=(u,n)=>{const d=l(n);d&&(t.onProgress(u,d,s.value),d.status="uploading",d.percentage=Math.round(u.percent))},m=(u,n)=>{const d=l(n);d&&(d.status="success",d.response=u,t.onSuccess(u,d,s.value),t.onChange(d,s.value))},$=u=>{Se(u.uid)&&(u.uid=ne());const n={name:u.name,percentage:0,status:"ready",size:u.size,raw:u,uid:u.uid};if(t.listType==="picture-card"||t.listType==="picture")try{n.url=URL.createObjectURL(u)}catch(d){Qe(ke,d.message),t.onError(d,n,s.value)}s.value=[...s.value,n],t.onChange(n,s.value)},U=async u=>{const n=u instanceof File?l(u):u;n||ie(ke,"file to be removed not found");const d=r=>{i(r);const f=s.value;f.splice(f.indexOf(r),1),t.onRemove(r,f),_e(r)};t.beforeRemove?await t.beforeRemove(n,s.value)!==!1&&d(n):d(n)};function y(){s.value.filter(({status:u})=>u==="ready").forEach(({raw:u})=>{var n;return u&&((n=a.value)==null?void 0:n.upload(u))})}return ce(()=>t.listType,u=>{u!=="picture-card"&&u!=="picture"||(s.value=s.value.map(n=>{const{raw:d,url:r}=n;if(!r&&d)try{n.url=URL.createObjectURL(d)}catch(f){t.onError(f,n,s.value)}return n}))}),ce(s,u=>{for(const n of u)n.uid||(n.uid=ne()),n.status||(n.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:i,clearFiles:c,handleError:v,handleProgress:w,handleStart:$,handleSuccess:m,handleRemove:U,submit:y,revokeFileObjectURL:_e}},oa=A({name:"ElUpload"}),ra=A({...oa,props:Dt,setup(t,{expose:a}){const s=t,l=x(),i=le(),{abort:c,submit:v,clearFiles:w,uploadFiles:m,handleStart:$,handleError:U,handleRemove:y,handleSuccess:u,handleProgress:n,revokeFileObjectURL:d}=sa(s,i),r=P(()=>s.listType==="picture-card"),f=P(()=>({...s,fileList:m.value,onStart:$,onProgress:n,onSuccess:u,onError:U,onRemove:y}));return xe(()=>{m.value.forEach(d)}),et(Re,{accept:tt(s,"accept")}),a({abort:c,submit:v,clearFiles:w,handleStart:$,handleRemove:y}),(p,S)=>(g(),T("div",null,[e(r)&&p.showFileList?(g(),M(be,{key:0,disabled:e(l),"list-type":p.listType,files:e(m),crossorigin:p.crossorigin,"handle-preview":p.onPreview,onRemove:e(y)},pe({append:k(()=>[b(he,fe({ref_key:"uploadRef",ref:i},e(f)),{default:k(()=>[p.$slots.trigger?N(p.$slots,"trigger",{key:0}):E("v-if",!0),!p.$slots.trigger&&p.$slots.default?N(p.$slots,"default",{key:1}):E("v-if",!0)]),_:3},16)]),_:2},[p.$slots.file?{name:"default",fn:k(({file:o})=>[N(p.$slots,"file",{file:o})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):E("v-if",!0),!e(r)||e(r)&&!p.showFileList?(g(),M(he,fe({key:1,ref_key:"uploadRef",ref:i},e(f)),{default:k(()=>[p.$slots.trigger?N(p.$slots,"trigger",{key:0}):E("v-if",!0),!p.$slots.trigger&&p.$slots.default?N(p.$slots,"default",{key:1}):E("v-if",!0)]),_:3},16)):E("v-if",!0),p.$slots.trigger?N(p.$slots,"default",{key:2}):E("v-if",!0),N(p.$slots,"tip"),!e(r)&&p.showFileList?(g(),M(be,{key:3,disabled:e(l),"list-type":p.listType,files:e(m),crossorigin:p.crossorigin,"handle-preview":p.onPreview,onRemove:e(y)},pe({_:2},[p.$slots.file?{name:"default",fn:k(({file:o})=>[N(p.$slots,"file",{file:o})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):E("v-if",!0)]))}});var la=Y(ra,[["__file","upload.vue"]]);const na=Te(la),ia=(t,a)=>Q.get(`/admin/product/baseTrademark/${t}/${a}`),ua=t=>t.id?Q.put("/admin/product/baseTrademark/update",t):Q.post("/admin/product/baseTrademark/save",t),da=t=>Q.delete("/admin/product/baseTrademark/remove/"+t),ca=()=>{let t=q(1),a=q(3),s=q(0),l=q([]);const i=async(w=1)=>{t.value=w;let m=await ia(t.value,a.value);m.code===200&&(s.value=m.data.total,l.value=m.data.records)};return{pageNo:t,limit:a,total:s,tradeMarkArr:l,getHasTradeMark:i,sizeChange:()=>{i()},removeTradeMark:async w=>{(await da(w)).code===200?(H({type:"success",message:"删除品牌成功"}),i(l.value.length>1?t.value:t.value-1)):H({type:"error",message:"删除品牌失败"})}}},pa=(t,a)=>{let s=q(!1),l=q(),i=at({tmName:"",logoUrl:""});return{dialogFormVisible:s,formRef:l,trademarkParams:i,addTradeMark:()=>{s.value=!0,i.id=0,i.tmName="",i.logoUrl="",me(()=>{l.value.clearValidate("tmName"),l.value.clearValidate("logoUrl")})},updateTradeMark:d=>{me(()=>{l.value.clearValidate("tmName"),l.value.clearValidate("logoUrl")}),s.value=!0,Object.assign(i,d)},cancel:()=>{s.value=!1},confirm:async()=>{await l.value.validate(),(await ua(i)).code===200?(s.value=!1,H({type:"success",message:i.id?"修改品牌成功":"添加品牌成功"}),t(i.id?a.value:1)):H({type:"error",message:i.id?"修改品牌失败":"添加品牌失败"})},handleAvatarSuccess:(d,r)=>{i.logoUrl=d.data,l.value.clearValidate("logoUrl")},beforeAvatarUpload:d=>{if(d.type==="image/png"||d.type==="image/jpeg"||d.type==="image/gif"){if(d.size/1024/1024<4)return!0;H({type:"error",message:"上传的文件大小应小于4M"})}else return H({type:"error",message:"上传的文件类型必须是PNG|JPG|GIF"}),!1},rules:{tmName:[{required:!0,trigger:"blur",validator:(d,r,f)=>{r.trim().length>=2?f():f(new Error("品牌名称位数大于等于两位"))}}],logoUrl:[{required:!0,trigger:"change",validator:(d,r,f)=>{r?f():f(new Error("Logo的图片务必上传"))}}]}}},fa=["src"],ma=["src"],va=A({__name:"index",setup(t){const{pageNo:a,limit:s,total:l,tradeMarkArr:i,getHasTradeMark:c,sizeChange:v,removeTradeMark:w}=ca();st(()=>{c()});const{dialogFormVisible:m,trademarkParams:$,rules:U,formRef:y,handleAvatarSuccess:u,beforeAvatarUpload:n,cancel:d,confirm:r,updateTradeMark:f,addTradeMark:p}=pa(c,a);return(S,o)=>{const C=nt,F=vt,R=gt,O=yt,ee=mt,te=it,ae=ut,I=dt,X=j,J=na,B=ct,Me=ft,ze=ot("has");return g(),T(Pe,null,[b(te,{class:"box-card"},{default:k(()=>[rt((g(),M(C,{type:"primary",size:"default",icon:e(ve),onClick:e(p)},{default:k(()=>[se(" 添加品牌 ")]),_:1},8,["icon","onClick"])),[[ze,"btn.Trademark.add"]]),b(O,{style:{margin:"10px 0"},border:"",data:e(i)},{default:k(()=>[b(F,{label:"序号",width:"80px",align:"center",type:"index"}),b(F,{label:"品牌名称",prop:"tmName"}),b(F,{label:"品牌LOGO"},{default:k(({row:D})=>[z("img",{src:D.logoUrl,alt:"图片丢失了~",style:{width:"100px",height:"100px"}},null,8,fa)]),_:1}),b(F,{label:"品牌操作"},{default:k(({row:D})=>[b(C,{type:"primary",size:"small",icon:e(lt),onClick:Ae=>e(f)(D)},null,8,["icon","onClick"]),b(R,{title:`您确定删除${D.tmName}`,width:"250px",icon:"delete",onConfirm:Ae=>e(w)(D.id)},{reference:k(()=>[b(C,{type:"danger",size:"small",icon:e(Fe)},null,8,["icon"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),b(ee,{"current-page":e(a),"onUpdate:currentPage":o[0]||(o[0]=D=>oe(a)?a.value=D:null),"page-size":e(s),"onUpdate:pageSize":o[1]||(o[1]=D=>oe(s)?s.value=D:null),"page-sizes":[3,5,7,9],background:!0,layout:"prev, pager, next, jumper, ->, sizes, total",total:e(l),onCurrentChange:e(c),onSizeChange:e(v)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])]),_:1}),b(Me,{modelValue:e(m),"onUpdate:modelValue":o[3]||(o[3]=D=>oe(m)?m.value=D:null),title:e($).id?"修改品牌":"添加品牌"},{footer:k(()=>[b(C,{type:"primary",size:"default",onClick:e(d)},{default:k(()=>[se("取消")]),_:1},8,["onClick"]),b(C,{type:"primary",size:"default",onClick:e(r)},{default:k(()=>[se("确定")]),_:1},8,["onClick"])]),default:k(()=>[b(B,{style:{width:"90%"},model:e($),rules:e(U),ref_key:"formRef",ref:y},{default:k(()=>[b(I,{label:"品牌名称","label-width":"100px",prop:"tmName"},{default:k(()=>[b(ae,{placeholder:"请您输入品牌名称",modelValue:e($).tmName,"onUpdate:modelValue":o[2]||(o[2]=D=>e($).tmName=D)},null,8,["modelValue"])]),_:1}),b(I,{label:"品牌Logo","label-width":"100px",prop:"logoUrl"},{default:k(()=>[b(J,{class:"avatar-uploader",action:"/api/admin/product/fileUpload","show-file-list":!1,"on-success":e(u),"before-upload":e(n)},{default:k(()=>[e($).logoUrl?(g(),T("img",{key:0,src:e($).logoUrl,class:"avatar"},null,8,ma)):(g(),M(X,{key:1,class:"avatar-uploader-icon"},{default:k(()=>[b(e(ve))]),_:1}))]),_:1},8,["on-success","before-upload"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}}),Ca=pt(va,[["__scopeId","data-v-a8c80ef2"]]);export{Ca as default};
